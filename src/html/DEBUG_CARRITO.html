<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug Carrito</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" type="image/png" href="../../img/icons/icon.png">
    <style>
        body { padding: 2rem; background: var(--color-light); }
        .debug-box {
            background: white;
            padding: 2rem;
            border-radius: 8px;
            margin-bottom: 2rem;
            border: 2px solid var(--color-secondary);
        }
        .debug-title {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--color-primary);
            margin-bottom: 1rem;
        }
        button {
            padding: 0.75rem 1.5rem;
            background: var(--color-secondary);
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin: 0.5rem;
            font-size: 1rem;
        }
        button:hover { background: var(--color-primary); }
        pre {
            background: #f5f5f5;
            padding: 1rem;
            border-radius: 4px;
            overflow-x: auto;
            font-size: 0.9rem;
        }
        .success { color: green; font-weight: bold; }
        .error { color: red; font-weight: bold; }
    </style>
</head>
<body>

<div class="debug-box">
    <div class="debug-title">üêõ Debug del Carrito</div>
    
    <h3>1. Ver estado del carrito:</h3>
    <button onclick="verCarrito()">Ver Carrito en Consola</button>
    <button onclick="verLocalStorage()">Ver localStorage</button>
    <pre id="output"></pre>
    
    <h3>2. Limpiar carrito:</h3>
    <button onclick="limpiarCarrito()" style="background: #c0392b;">Limpiar Carrito</button>
    
    <h3>3. Agregar producto de prueba:</h3>
    <button onclick="agregarProductoPrueba()">Agregar Producto Test</button>
    
    <h3>4. Test de funciones:</h3>
    <button onclick="testParsePrice()">Test parsePrice()</button>
    <button onclick="testFormatPrice()">Test formatPrice()</button>
    <button onclick="testUpdateBadge()">Test updateCartBadge()</button>
    
    <h3>5. Test de Toast:</h3>
    <button onclick="testToast()">Mostrar Toast</button>

</div>

<script src="script.js"></script>
<script>
const output = document.getElementById('output');

function verCarrito() {
    console.log('Carrito actual:', cart);
    output.textContent = JSON.stringify(cart, null, 2);
}

function verLocalStorage() {
    const stored = localStorage.getItem('artisan_cart');
    console.log('localStorage.artisan_cart:', stored);
    output.textContent = stored ? JSON.stringify(JSON.parse(stored), null, 2) : 'localStorage vac√≠o';
}

function limpiarCarrito() {
    cart = [];
    localStorage.removeItem('artisan_cart');
    updateCartBadge();
    output.textContent = '‚úì Carrito limpiado';
    verCarrito();
}

function agregarProductoPrueba() {
    const testProduct = {
        id: Date.now(),
        name: 'Producto Test',
        price: 49.99,
        quantity: 1,
        image: 'https://via.placeholder.com/100'
    };
    cart.push(testProduct);
    localStorage.setItem('artisan_cart', JSON.stringify(cart));
    updateCartBadge();
    showToastNotification('‚úì Producto de test agregado');
    output.textContent = '‚úì Producto de test agregado: ' + JSON.stringify(testProduct, null, 2);
    verCarrito();
}

function testParsePrice() {
    const tests = ['$85.00', '$1,234.56', '85.00', '$100'];
    let result = 'Resultados de parsePrice():\n';
    tests.forEach(t => {
        result += `parsePrice("${t}") = ${parsePrice(t)}\n`;
    });
    output.textContent = result;
    console.log(result);
}

function testFormatPrice() {
    const tests = [85, 1234.567, 0.99, 100];
    let result = 'Resultados de formatPrice():\n';
    tests.forEach(t => {
        result += `formatPrice(${t}) = ${formatPrice(t)}\n`;
    });
    output.textContent = result;
    console.log(result);
}

function testUpdateBadge() {
    const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
    output.textContent = `Total items en carrito: ${totalItems}\nBadge actualizado: ${document.querySelector('.cart-badge')?.textContent || 'No encontrado'}`;
    console.log('Cart badge:', document.querySelector('.cart-badge'));
}

function testToast() {
    showToastNotification('üéâ Toast de Prueba - Funciona Correctamente');
}
</script>

</body>
</html>
